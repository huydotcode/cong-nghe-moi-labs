<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danh má»¥c sáº£n pháº©m</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <%- include('../partials/header') %>

  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1>ðŸ“‚ Danh má»¥c sáº£n pháº©m</h1>
      <% if (user && user.role === 'admin') { %>
        <a href="/categories/add" class="btn btn-success">
          + ThÃªm danh má»¥c
        </a>
      <% } %>
    </div>

    <% if (typeof error !== 'undefined' && error) { %>
      <div class="alert alert-danger" role="alert">
        <%= error %>
      </div>
    <% } %>

    <% if (categories && categories.length > 0) { %>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>TÃªn danh má»¥c</th>
              <th>MÃ´ táº£</th>
              <% if (user && user.role === 'admin') { %>
                <th class="text-center">Thao tÃ¡c</th>
              <% } %>
            </tr>
          </thead>
          <tbody>
            <% categories.forEach((category, index) => { %>
              <tr>
                <td><%= index + 1 %></td>
                <td><strong><%= category.name %></strong></td>
                <td><%= category.description || '-' %></td>
                <% if (user && user.role === 'admin') { %>
                  <td class="text-center">
                    <a href="/categories/edit/<%= category.categoryId %>" class="btn btn-sm btn-warning">
                      Sá»­a
                    </a>
                    <form action="/categories/delete/<%= category.categoryId %>" method="POST" style="display: inline;">
                      <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a danh má»¥c nÃ y?')">
                        XÃ³a
                      </button>
                    </form>
                  </td>
                <% } %>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    <% } else { %>
      <div class="alert alert-info">
        ChÆ°a cÃ³ danh má»¥c nÃ o. 
        <% if (user && user.role === 'admin') { %>
          <a href="/categories/add">ThÃªm danh má»¥c Ä‘áº§u tiÃªn</a>
        <% } %>
      </div>
    <% } %>
  </div>

  <%- include('../partials/footer') %>
</body>
</html>
